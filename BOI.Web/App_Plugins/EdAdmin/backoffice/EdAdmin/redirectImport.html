<div ng-controller="EdAdmin.Controllers.RedirectImportController as ric">
    <umb-editor-view footer="false">
        <umb-editor-header name="ric.name" description="ric.description" hide-description="false" name-locked="true" description-locked="true" hide-alias="true" hide-icon="true"></umb-editor-header>
        <umb-editor-container class="form-horizontal">
            <umb-box>
                <umb-box-content>
                    <p class="bold ng-scope">Please ensure the upload is in the correct format - check the help text to ensure you have the correct format</p>
                    <div ng-show="ric.invalidFileFormat" class="alert alert-error property-error" style="display: none;">The uploaded file must be in <b>.csv</b> format.</div>
                    <div ng-show="ric.noFile" class="alert alert-error property-error" style="display: none;">A .csv file must be selected.</div>
                    <div class="umb-panel-group__details-status-actions ng-scope" ng-hide="ric.processing || ric.processed">
                        <div class="input-group">
                            <label class="input-group-btn">
                                <span class="btn btn-info" style="margin-bottom: 10px; text-align: center;">
                                    Select .csv <input type="file" accept=".csv" umb-file-upload ngf-multiple="false" class="ng-scope" style="display: none;">
                                </span>
                            </label>
                            <input type="text" id="fileName" class="form-control" readonly style="text-align: center; width: 300px;" value="{{ric.fileName}}">
                        </div>
                        <input ng-if="ric.fileName" type="submit" ng-click="ric.upload()" class="btn btn-success" value="Upload file" style="text-align: center; width: 200px;">
                    </div>
                    <div class="umb-panel-group__details-status-actions ng-scope" ng-show="ric.processing">
                        <div class="clearfix ng-scope">
                            <div class="alert alert-info">Processing file<strong> {{ric.fileName}} </strong></div>
                        </div>
                        <umb-load-indicator></umb-load-indicator>
                    </div>
                    <div class="umb-panel-group__details-status-actions ng-scope" ng-show="ric.processed">
                        <div class="clearfix ng-scope">
                            <div ng-show="ric.success" class="alert alert-success"><b>Success - </b>{{ric.success}}</div>
                            <div ng-show="ric.error" class="alert alert-error"><b>Error processing file {{ric.fileName}} - </b>{{ric.error}}</div>
                            <div class="btn-group">
                                <input ng-preventdefault ng-click="ric.back()" class="btn btn-info" value="Back to file upload" style="width: 200px;">
                            </div>
                        </div>
                    </div>
                </umb-box-content>
            </umb-box>

            <umb-box class="umb-box">
                <umb-box-header title="Help Text" description="Ensure you read the below before uploading your CSV file."></umb-box-header>
                <umb-box-content>
                    <p>Ensure the csv has a header row.</p>
                    <p>Two columns > Source and Destination</p>
                    <p>All fields are mandatory.</p>
                    <p>There should not be any empty row or column.</p>
                    <p>Source and destination should be full urls with trailing slash e.g. https://sitedomain.com/page-name/ </p>
                    <p><u><a href="/assets/files/Redirect.csv">Sample file can be downloaded here</a></u></p>
                </umb-box-content>
            </umb-box>

            <umb-box class="umb-box">
                <umb-box-header title="Export current redirects"></umb-box-header>
                <umb-box-content>
                    <div ng-hide="exportProcessing">
                        <div class="btn-group">
                            <a prevent-default ng-click="ric.export()" class="btn btn-success">Export redirects</a>
                        </div>
                    </div>
                    <umb-load-indicator ng-if="exportProcessing"></umb-load-indicator>
                </umb-box-content>
            </umb-box>

        </umb-editor-container>
    </umb-editor-view>
</div>